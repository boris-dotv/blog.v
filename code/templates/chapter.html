<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="$lang$" xml:lang="$lang$"$if(dir)$ dir="$dir$"$endif$>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

  <!-- Add Open Graph meta tags for share image -->
  <meta property="og:image" content="https://raw.githubusercontent.com/natolambert/rlhf-book/main/images/rlhf-book-share.png" />
  <meta property="og:image:width" content="1920" />
  <meta property="og:image:height" content="1080" />
  
  <!-- <meta property="og:title" content="$if(title-prefix)$$title-prefix$ ‚Äì $endif$$pagetitle$" /> -->
  <meta property="og:title" content="$if(page-title)$$page-title$$else$$title$$endif$ | RLHF Book by Boris .v" />
  <meta property="og:description" content="The Blog.v Book" />
  <meta property="og:url" content="https://rlhfbook.com" />

  $for(author-meta)$
  <meta name="author" content="$author-meta$" />
$endfor$
$if(date-meta)$
  <meta name="dcterms.date" content="$date-meta$" />
$endif$
$if(keywords)$
  <meta name="keywords" content="$for(keywords)$$keywords$$sep$, $endfor$" />
$endif$
  <!-- <title>RLHF Book</title> -->
   <!-- SEO and Open Graph titles -->
   <title>
    $if(page-title)$
      $page-title$ | RLHF Book by Boris .v
    $else$
      $title$ | RLHF Book by Boris .v
    $endif$
  </title>
  
  <style>
    $styles.html()$
    $style.css()$
  </style>
$for(css)$
  <link rel="stylesheet" href="$css$" />
$endfor$
$if(math)$
  $math$
  <style>
    /* Target all possible MathJax display containers */
    .MathJax_Display, .MJXc-display, .math.display, mjx-container[jax="CHTML"][display="true"], mjx-container[jax="SVG"][display="true"] {
      overflow-x: auto;
      max-width: 100%;
      padding: 0.5em 0;
    }
  </style>
$endif$
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
$for(header-includes)$
  $header-includes$
$endfor$

<!-- custom js nav -->
<script src="nav.js" defer></script>
<script src="header-anchors.js" defer></script>
<script src="table-scroll.js" defer></script>
<!-- Âú® head ÁªìÊùüÂâçÊ∑ªÂä† -->
<script src="sidebar.js" defer></script> 
</head> <!-- ËøôÈáåÊòØÂéüÊú¨ÁöÑ /head -->

<body>
$for(include-before)$
$include-before$
$endfor$

<!-- 1. È°∂ÈÉ®ÂØºËà™ (‰øùÊåÅ‰∏çÂèò) -->
$if(title)$
<header id="title-block-header">
<h1 class="title"><a href="https://rlhfbook.com/" style="color: inherit; text-decoration: none;">$title$</a></h1>
$if(subtitle)$
<p class="subtitle">$subtitle$</p>
$endif$
$for(author)$
<p class="author">$author$</p>
$endfor$
<navigation-dropdown expanded="false"></navigation-dropdown>
</header>
$endif$

<!-- 2. È°µÈù¢Â∏ÉÂ±ÄÂÆπÂô®Ôºö‰æßËæπÊ†è + Ê≠£Êñá -->
<div class="page-wrapper">
  
  <!-- Â∑¶‰æßËæπÊ†è -->
  <aside id="sidebar">
    <div class="sticky-container">
        <!-- Â¶ÇÊûú‰Ω†ÊÉ≥ÊâãÂä®Âä†Á´†ËäÇÂàóË°®ÔºåÂèØ‰ª•Âú®ËøôÈáåÂä† -->
        <!-- <div class="global-toc"> <a href="index.html">Home</a> ... </div> -->
        
        <!-- JS ‰ºöÊääÂΩìÂâçÈ°µÁõÆÂΩïÊ≥®ÂÖ•Âà∞ËøôÈáå -->
        <div id="sidebar-content"></div>
    </div>
  </aside>

  <!-- Âè≥‰æßÊ≠£ÊñáÂå∫Âüü -->
  <main class="main-content">
    
    <div> <h3> Chapter Contents </h3> </div>
    
    <!-- ËøôÈáåÊòØ Pandoc ÁîüÊàêÁöÑÂ±Ö‰∏≠ÁõÆÂΩïÔºå‰øùÁïôÂÆÉ -->
    $if(toc)$
    <nav id="$idprefix$TOC" role="doc-toc">
    $if(toc-title)$
    <h2 id="$idprefix$toc-title">$toc-title$</h2>
    $endif$
    $table-of-contents$
    </nav>
    $endif$

    <div id="content">
      $body$
    </div>

    <div id="chapter-navigation" style="display: flex; justify-content: space-between; padding: 2em 0;">
      $if(prev-url)$
      <a href="$prev-url$" class="prev-chapter">
        ‚Üê Previous: $prev-chapter$
      </a>
      $else$
      <div></div>
      $endif$
      
      $if(next-url)$
      <a href="$next-url$" class="next-chapter">
        Next: $next-chapter$ ‚Üí
      </a>
      $endif$
    </div>

  </main>
</div>
<!-- page-wrapper ÁªìÊùü -->

$for(include-after)$
$include-after$
$endfor$

<!-- Footer ‰øùÊåÅ‰∏çÂèò -->
<footer style="padding: 20px; text-align: center;">
  <!-- ... existing footer content ... -->
  <hr>
  <p>&copy; 2025 Boris .v</p>
</footer>
<!-- COPY BUTTON SCRIPT START (TIGHT SPACING & PREMIUM UI) -->
<script>
(function() {
    console.log("üöÄ Premium Copy Button Script Loaded (Compact Version)");

    const styleSheet = document.createElement("style");
    styleSheet.innerText = `
        /* [1] Â§ñÂ£≥ÔºöË¥üË¥£ËÉåÊôØ„ÄÅÂúÜËßí„ÄÅÈò¥ÂΩ± */
        .code-wrapper {
            position: relative;
            margin: 1.5em 0;
            width: 100%;
            display: block;
            border-radius: 8px;
            background-color: #1E222A;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        /* Á∫¢ÁªøÁÅØÔºöÁ®çÂæÆ‰∏äÁßª‰∏ÄÁÇπÔºåÊõ¥Á¥ßÂáë */
        .code-wrapper::before {
            content: '';
            position: absolute;
            top: 14px; /* ÂéüÊù•ÊòØ 16pxÔºåÂæÄ‰∏äÊèê */
            left: 14px;
            z-index: 20;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #FF5F56;
            box-shadow: 18px 0 0 #FFBD2E, 36px 0 0 #27C93F;
            opacity: 1;
        }

        /* [2] ‰∏≠Èó¥Â±ÇÔºöÂΩªÂ∫ïÊ∏ÖÈô§Âπ≤Êâ∞ */
        .code-wrapper div.sourceCode {
            margin: 0 !important;
            padding: 0 !important;
            background: transparent !important;
            border: none !important;
            box-shadow: none !important;
            width: 100%;
            overflow-x: auto;
        }

        /* [3] ÂÜÖÂ±Ç PREÔºö‰øÆÊ≠£È°∂ÈÉ®Èó¥Ë∑ù */
        .code-wrapper pre {
            margin: 0 !important;
            background: transparent !important;
            border: none !important;
            
            /* Ê†∏ÂøÉ‰øÆÊîπÔºö‰ªé 2.8em ÈôçÂà∞ 2.4emÔºåÊ∂àÈô§Â§ö‰ΩôÁ©∫ÁôΩ */
            /* 2.4em * 14px ‚âà 33.6pxÔºåÂàöÂ•ΩÁõñËøá 14px(top) + 10px(height) + ÁºìÂÜ≤ */
            padding: 2.6em   2em    2em    2em   !important;
            
            font-family: "JetBrains Mono", "Fira Code", Consolas, monospace;
            font-size: 14px;
            line-height: 1.5; /*Á®çÂæÆË∞ÉÂ∞è‰∏ÄÁÇπË°åÈ´òÔºåËÆ©‰ª£Á†ÅÊõ¥Á¥ßÂáë*/
            color: #A6ACCD;
            width: max-content;
            min-width: 100%;
        }

        /* [4] Á°Æ‰øù code Ê†áÁ≠æÊ≤°Êúâ‰ªª‰ΩïËæπË∑ù */
        .code-wrapper pre > code {
            padding: 1.0em !important;
            margin: 0 !important;
            display: block; /* Á°Æ‰øùÂÆÉË¥¥Âêà pre */
        }

        /* ÈöêËóèÂéüÊù•ÁöÑË£ÖÈ•∞ */
        div.sourceCode::before, pre::before, code::before {
            display: none !important;
            content: none !important;
        }

        /* [5] Copy ÊåâÈíÆÔºö‰ΩçÁΩÆÂæÆË∞ÉÔºåÈÖçÂêàÊõ¥Á¥ßÂáëÁöÑÈ°∂ÈÉ® */
        .copy-btn {
            position: absolute;
            top: 6px;   /* Ë∑üÈöèÁ∫¢ÁªøÁÅØ‰∏äÁßª */
            right: 8px;
            z-index: 100;
            
            /* Â∏ÉÂ±Ä */
            display: flex !important;
            align-items: center;
            justify-content: center;
            
            /* Â≠ó‰Ωì */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            font-size: 11px; /* Á®çÂæÆÁº©Â∞è‰∏ÄÁÇπÂ≠ó‰Ωì */
            font-weight: 500;
            line-height: 1;
            padding: 5px 10px;
            border-radius: 6px;
            
            /* Ë¥®ÊÑü */
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #6c7393;
            backdrop-filter: blur(5px);
            
            /* ‰∫§‰∫í */
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            opacity: 0;
            transform: translateY(2px);
        }

        .code-wrapper:hover .copy-btn {
            opacity: 1;
            transform: translateY(0);
        }

        .copy-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
            border-color: rgba(255, 255, 255, 0.25);
        }

        .copy-btn:active {
            transform: scale(0.95);
        }

        .copy-btn.copied {
            background: rgba(195, 232, 141, 0.15);
            color: #C3E88D;
            border-color: rgba(195, 232, 141, 0.3);
        }
    `;
    document.head.appendChild(styleSheet);

    document.addEventListener('DOMContentLoaded', function() {
        const targets = document.querySelectorAll('div.sourceCode, pre:not(.sourceCode pre)'); 
        targets.forEach((block, index) => {
            if (block.parentNode.classList.contains('code-wrapper')) return;
            try {
                const wrapper = document.createElement('div');
                wrapper.className = 'code-wrapper';
                block.parentNode.insertBefore(wrapper, block);
                wrapper.appendChild(block);
                
                const btn = document.createElement('button');
                btn.className = 'copy-btn';
                btn.innerText = 'Copy';
                
                btn.onclick = function() {
                    const text = block.textContent;
                    navigator.clipboard.writeText(text).then(() => {
                        btn.innerText = 'Copied';
                        btn.classList.add('copied');
                        setTimeout(() => {
                            btn.innerText = 'Copy';
                            btn.classList.remove('copied');
                        }, 2000);
                    }).catch(err => {
                        console.error('Copy failed', err);
                        btn.innerText = 'Error';
                    });
                };
                wrapper.appendChild(btn);
            } catch (e) {
                console.error(`Failed to process block ${index}`, e);
            }
        });
    });
})();
</script>
<!-- COPY BUTTON SCRIPT END -->
</body>
</html>
